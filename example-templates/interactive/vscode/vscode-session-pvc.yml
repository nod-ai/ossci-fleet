apiVersion: v1
kind: Pod
metadata:
  name: {{POD_NAME}}
spec:
  volumes:
  - name: vscode-vol
    persistentVolumeClaim:
      claimName: {{PVC_CLAIM_NAME}}
  containers:
  - name: interactive-shell
    # Docker image to use for the interactive vscode session.
    image: ubuntu:24.04
    command:
      - /bin/bash
      - -c
      - |
        apt-get update && \
        apt-get install -y curl && \
        curl -fsSL https://code-server.dev/install.sh | sh && \
        code-server --auth none --port 9000
    tty: true
    stdin: true
    volumeMounts:
      - name: vscode-vol
        mountPath: /ossci
        readOnly: false
    resources:
      # Number of gpus available in the interactive vscode session.
      limits:
        amd.com/gpu: 1
